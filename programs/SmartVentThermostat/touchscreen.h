/*
  touchscreen.h

  Define enums and functions for managing the touchpad on the LCD display.
*/
#include <Arduino.h>

/////////////////////////////////////////////////////////////////////////////////////////////
// Enums.
/////////////////////////////////////////////////////////////////////////////////////////////

// Touchscreen events.
typedef enum _eTouchEvent {
  TS_UNCERTAIN,       // Ambiguous touch pressure.
  TS_NO_TOUCH,        // Screen not being touched, both before and after debouncing.
  TS_TOUCH_PRESENT,   // Touch is present on screen, both before and after debouncing.
  TS_TOUCH_EVENT,     // Debounced touch event, next event will be release event.
  TS_RELEASE_EVENT    // Debounced release event, next event will be touch event.
} eTouchEvent;

/////////////////////////////////////////////////////////////////////////////////////////////
// Functions.
/////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////
// Initialize touchscreen, specifying rotation value of LCD display and touchscreen.
/////////////////////////////////////////////////////////////////////////////////////////////
extern void initTouchscreen(uint8_t rotation);

/////////////////////////////////////////////////////////////////////////////////////////////
// Check for touch screen touches and releases. Return TS_UNCERTAIN if the amount of touch
// pressure is ambiguous so can't tell if screen is touched or not, TS_NO_TOUCH if there is
// currently no screen touch, TS_TOUCH_PRESENT if there is a touch, TS_TOUCH_EVENT if a touch
// has been debounced and press event occurred, and TS_RELEASE_EVENT if a release has been
// debounced and a release event occurred. When TS_TOUCH_EVENT is returned, (x, y) contains
// the touched point and pres is the pressure.
// Require at least TS_DEBOUNCE_MS between recognition of each touch or release.
// If px and py are not NULL, the raw x and y values are returned there.
/////////////////////////////////////////////////////////////////////////////////////////////
extern eTouchEvent getTouchEvent(int16_t& x, int16_t& y, int16_t& pres,
  int16_t* px=NULL, int16_t* py=NULL);

/////////////////////////////////////////////////////////////////////////////////////////////
// Check for touch screen button press or release and show a message on monitor if so.
/////////////////////////////////////////////////////////////////////////////////////////////
extern void showTouchesAndReleases();

/////////////////////////////////////////////////////////////////////////////////////////////
// End.
/////////////////////////////////////////////////////////////////////////////////////////////
